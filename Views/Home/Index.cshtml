@{
    ViewData["Title"] = "Registro de Cédula";

    // Valores simulados desde la base de datos
    string periodoIngreso = "2021-1"; // Ejemplo de datos obtenidos de la base de datos
    string periodoEgreso = "2025-2"; // Ejemplo de datos obtenidos de la base de datos
}

<div class="container-fluid">

    <!-- Sección: Periodo de ingreso y egreso -->
    <section class="mt-4 mb-5">
        <div class="row g-3">
            <!-- Periodo de ingreso -->
            <div class="col-md-6 text-start">
                <label class="fw-bold">Periodo de ingreso:</label>
                <p class="form-control-plaintext border rounded p-2 bg-light">@ViewData["PeriodoIngreso"]</p>
            </div>
            <!-- Periodo de egreso -->
            <div class="col-md-6 text-start">
                <label class="fw-bold">Periodo de egreso:</label>
                <p class="form-control-plaintext border rounded p-2 bg-light">@ViewData["PeriodoEgreso"]</p>
            </div>
        </div>
    </section>

    <!-- Sección 1: Datos Personales -->
    <section class="mb-5">
        <h3 class="text-center mb-4">Datos Personales</h3>
        <div class="row g-3">
            <div class="col-md-4">
                <label class="fw-bold">Nombre:</label>
                <input type="text" class="form-control" placeholder="Nombre">
            </div>
            <div class="col-md-4">
                <label class="fw-bold">Apellido paterno:</label>
                <input type="text" class="form-control" placeholder="Apellido paterno">
            </div>
            <div class="col-md-4">
                <label class="fw-bold">Apellido materno:</label>
                <input type="text" class="form-control" placeholder="Apellido materno">
            </div>
        </div>
        <div class="row g-3 mt-3">
            <div class="col-md-3">
                <label class="fw-bold">Sexo:</label>
                <input type="text" class="form-control" placeholder="Sexo">
            </div>
            <div class="col-md-3">
                <label class="fw-bold">Estado civil:</label>
                <input type="text" class="form-control" placeholder="Estado civil">
            </div>
            <div class="col-md-3">
                <label class="fw-bold">Fecha de nacimiento:</label>
                <input type="text" class="form-control" placeholder="Fecha de nacimiento">
            </div>
            <div class="col-md-3">
                <label class="fw-bold">Teléfono de celular:</label>
                <input type="text" class="form-control" placeholder="Teléfono de celular">
            </div>
        </div>
        <div class="row g-3 mt-3">
            <div class="col-md-3">
                <label class="fw-bold">Teléfono de casa:</label>
                <input type="text" class="form-control" placeholder="Teléfono de casa">
            </div>
            <div class="col-md-3">
                <label class="fw-bold">Discapacidad:</label>
                <input type="text" class="form-control" placeholder="Discapacidad">
            </div>
            <div class="col-md-3">
                <label class="fw-bold">Hijos (as):</label>
                <select class="form-select">
                    <option selected>Selecciona</option>
                    <option value="1">Sí</option>
                    <option value="2">No</option>
                </select>
            </div>
        </div>
    </section>

    <!-- Sección 2: Lugar de Nacimiento -->
    <section class="mb-5">
        <h3 class="text-center mb-4">Lugar de Nacimiento</h3>
        <div class="row g-3">
            <!-- País -->
            <div class="col-md-4">
                <label class="fw-bold" for="paisNacimiento">País:</label>
                <select class="form-select" id="paisNacimiento">
                    <option selected>Selecciona un país</option>
                    <option value="mexico">México</option>
                    <option value="usa">Estados Unidos</option>
                    <option value="canada">Canadá</option>
                    <option value="espana">España</option>
                    <option value="francia">Francia</option>
                    <option value="otro">Otro</option>
                </select>
            </div>
            <!-- Estado -->
            <div class="col-md-4">
                <label class="fw-bold" for="estado">Estado:</label>
                <input type="text" class="form-control" id="estado" placeholder="Estado">
            </div>
            <!-- Municipio -->
            <div class="col-md-4">
                <label class="fw-bold" for="municipio">Municipio:</label>
                <input type="text" class="form-control" id="municipio" placeholder="Municipio">
            </div>
        </div>
    </section>


    <!-- Sección 3: Datos Escolares -->
    <section class="mb-5">
        <h3 class="text-center mb-4">Datos Escolares</h3>
        <div class="row g-3">
            <div class="col-md-4">
                <label class="fw-bold">Campus:</label>
                <input type="text" class="form-control" placeholder="Campus">
            </div>
            <div class="col-md-4">
                <label class="fw-bold">Facultad:</label>
                <input type="text" class="form-control" placeholder="Facultad">
            </div>
            <div class="col-md-4">
                <label class="fw-bold">Carrera:</label>
                <input type="text" class="form-control" placeholder="Carrera">
            </div>
        </div>
    </section>

    <!-- Sección 4: Domicilio -->
    <section class="mb-5">
        <h3 class="text-center mb-4">Domicilio</h3>
        <div class="row g-3">
            <div class="col-md-6">
                <label class="fw-bold" for="calleNumero">Calle y número:</label>
                <input type="text" class="form-control" id="calleNumero" placeholder="Calle y número">
            </div>
            <div class="col-md-3">
                <label class="fw-bold" for="colonia">Colonia:</label>
                <input type="text" class="form-control" id="colonia" placeholder="Colonia">
            </div>
            <div class="col-md-3">
                <label class="fw-bold" for="codigoPostal">Código Postal:</label>
                <input type="text" class="form-control" id="codigoPostal" placeholder="Código Postal">
            </div>
        </div>
        <div class="row g-3 mt-3">
            <div class="col-md-6">
                <label class="fw-bold" for="municipio">Municipio:</label>
                <input type="text" class="form-control" id="municipio" placeholder="Municipio">
            </div>
            <div class="col-md-6">
                <label class="fw-bold" for="estado">Estado:</label>
                <input type="text" class="form-control" id="estado" placeholder="Estado">
            </div>
        </div>
    </section>

    <section class="mb-5">
        <h3 class="text-center mb-4">Idiomas</h3>
        <div id="idiomasContainer">
            <div class="row g-2 align-items-center idioma-row">
                <div class="col-md-5">
                    <select class="form-select idioma-select" required>
                        <option value="" selected disabled>Idioma</option>
                        <option value="Inglés">Inglés</option>
                        <option value="Español">Español</option>
                        <option value="Francés">Francés</option>
                        <option value="Alemán">Alemán</option>
                    </select>
                </div>
                <div class="col-md-5">
                    <select class="form-select nivel-select" required>
                        <option value="" selected disabled>Nivel</option>
                        <option value="Básico">Básico</option>
                        <option value="Intermedio">Intermedio</option>
                        <option value="Avanzado">Avanzado</option>
                    </select>
                </div>
                <div class="col-md-2 text-end">
                    <button type="button" class="btn btn-danger btn-sm eliminar-idioma" onclick="eliminarIdioma(this)" disabled>-</button>
                </div>
            </div>
        </div>
        <div class="mt-3">
            <a href="#" class="text-primary" onclick="agregarIdioma()">Agregar otro idioma</a>
        </div>
    </section>

    <!-- Sección 6: Datos Laborales -->
    <section class="mb-5">
        <h3 class="text-center mb-4">Datos Laborales</h3>
        <p class="text-center">
            ¿Trabajas actualmente?
            <input type="radio" id="trabajaSi" name="trabaja" value="si" onclick="toggleLaborales(true)">
            <label for="trabajaSi">Sí</label>
            <input type="radio" id="trabajaNo" name="trabaja" value="no" onclick="toggleLaborales(false)" checked>
            <label for="trabajaNo">No</label>
        </p>

        <!-- Formulario de datos laborales -->
        <div id="datosLaborales" style="display: none;">
            <div class="row g-3">
                <div class="col-md-4">
                    <label class="fw-bold">Nombre de empresa:</label>
                    <input type="text" class="form-control" placeholder="Nombre de empresa">
                </div>
                <div class="col-md-4">
                    <label class="fw-bold">Dirección:</label>
                    <input type="text" class="form-control" placeholder="Dirección">
                </div>
                <div class="col-md-4">
                    <label class="fw-bold">Teléfono:</label>
                    <input type="text" class="form-control" placeholder="Teléfono">
                </div>
            </div>
            <div class="row g-3 mt-3">
                <div class="col-md-4">
                    <label class="fw-bold">Puesto:</label>
                    <input type="text" class="form-control" placeholder="Puesto">
                </div>
                <div class="col-md-4">
                    <label class="fw-bold">Jefe inmediato:</label>
                    <input type="text" class="form-control" placeholder="Jefe inmediato">
                </div>
                <div class="col-md-4">
                    <label class="fw-bold">Antigüedad:</label>
                    <input type="text" class="form-control" placeholder="Antigüedad">
                </div>
            </div>
            <div class="row g-3 mt-3">
                <div class="col-md-6">
                    <label class="fw-bold">Correo del Jefe:</label>
                    <input type="email" class="form-control" placeholder="Correo del Jefe">
                </div>
            </div>
        </div>
    </section>

    <!-- Botón de Registro -->
    <div class="text-center">
        <button class="btn btn-success btn-lg px-5" data-bs-toggle="modal" data-bs-target="#registroModal">Registrar</button>
        <p class="mt-3 text-muted">*Todos los datos son obligatorios</p>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="registroModal" tabindex="-1" aria-labelledby="registroModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="registroModalLabel">Registro Exitoso</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                ¡Tu cédula ha sido registrada correctamente!
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Aceptar</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<script>
    // Función para mostrar u ocultar los datos laborales
    function toggleLaborales(show) {
        const datosLaborales = document.getElementById('datosLaborales');
        if (show) {
            datosLaborales.style.display = 'block';
        } else {
            datosLaborales.style.display = 'none';
        }
    }
</script>

<script>
    function agregarIdioma() {
        const idiomasContainer = document.getElementById('idiomasContainer');
        const idiomaRows = idiomasContainer.querySelectorAll('.idioma-row');
        let canAdd = true;

        // Validar que todos los combobox tengan valores seleccionados
        idiomaRows.forEach(row => {
            const idiomaSelect = row.querySelector('.idioma-select');
            const nivelSelect = row.querySelector('.nivel-select');
            if (!idiomaSelect.value || !nivelSelect.value) {
                canAdd = false;
            }
        });

        if (!canAdd) {
            alert('Por favor, selecciona un idioma y un nivel antes de agregar otro.');
            return;
        }

        // Crear un nuevo conjunto de combobox
        const newRow = document.createElement('div');
        newRow.className = 'row g-2 align-items-center idioma-row';
        newRow.innerHTML = `
            <div class="col-md-5">
                <select class="form-select idioma-select" required>
                    <option value="" selected disabled>Idioma</option>
                    <option value="Inglés">Inglés</option>
                    <option value="Español">Español</option>
                    <option value="Francés">Francés</option>
                    <option value="Alemán">Alemán</option>
                </select>
            </div>
            <div class="col-md-5">
                <select class="form-select nivel-select" required>
                    <option value="" selected disabled>Nivel</option>
                    <option value="Básico">Básico</option>
                    <option value="Intermedio">Intermedio</option>
                    <option value="Avanzado">Avanzado</option>
                </select>
            </div>
            <div class="col-md-2 text-end">
                <button type="button" class="btn btn-danger btn-sm eliminar-idioma" onclick="eliminarIdioma(this)">-</button>
            </div>
        `;
        idiomasContainer.appendChild(newRow);

        // Habilitar botones de eliminar en todas las filas excepto la primera
        idiomaRows.forEach(row => {
            const eliminarBtn = row.querySelector('.eliminar-idioma');
            if (eliminarBtn) eliminarBtn.disabled = false;
        });
    }

    function eliminarIdioma(button) {
        const idiomasContainer = document.getElementById('idiomasContainer');
        const idiomaRows = idiomasContainer.querySelectorAll('.idioma-row');

        if (idiomaRows.length > 1) {
            const rowToDelete = button.closest('.idioma-row');
            idiomasContainer.removeChild(rowToDelete);

            // Si solo queda un conjunto, deshabilitar el botón de eliminar
            if (idiomasContainer.querySelectorAll('.idioma-row').length === 1) {
                const remainingRow = idiomasContainer.querySelector('.idioma-row');
                const eliminarBtn = remainingRow.querySelector('.eliminar-idioma');
                if (eliminarBtn) eliminarBtn.disabled = true;
            }
        }
    }

    // Inicialmente deshabilitar el botón de eliminar si hay solo un conjunto
    document.addEventListener('DOMContentLoaded', () => {
        const idiomasContainer = document.getElementById('idiomasContainer');
        const idiomaRows = idiomasContainer.querySelectorAll('.idioma-row');
        if (idiomaRows.length === 1) {
            const eliminarBtn = idiomaRows[0].querySelector('.eliminar-idioma');
            if (eliminarBtn) eliminarBtn.disabled = true;
        }
    });
</script>